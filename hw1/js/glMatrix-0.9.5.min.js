glMatrixArrayType="undefined"!=typeof Float32Array?Float32Array:"undefined"!=typeof WebGLFloatArray?WebGLFloatArray:Array;var vec3={create:function(t){var r=new glMatrixArrayType(3);return t&&(r[0]=t[0],r[1]=t[1],r[2]=t[2]),r},set:function(t,r){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r},add:function(t,r,n){return n&&t!=n?(n[0]=t[0]+r[0],n[1]=t[1]+r[1],n[2]=t[2]+r[2],n):(t[0]+=r[0],t[1]+=r[1],t[2]+=r[2],t)},subtract:function(t,r,n){return n&&t!=n?(n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],n):(t[0]-=r[0],t[1]-=r[1],t[2]-=r[2],t)},negate:function(t,r){return r||(r=t),r[0]=-t[0],r[1]=-t[1],r[2]=-t[2],r},scale:function(t,r,n){return n&&t!=n?(n[0]=t[0]*r,n[1]=t[1]*r,n[2]=t[2]*r,n):(t[0]*=r,t[1]*=r,t[2]*=r,t)},normalize:function(t,r){r||(r=t);var n=t[0],a=t[1],e=t[2],u=Math.sqrt(n*n+a*a+e*e);return u?1==u?(r[0]=n,r[1]=a,r[2]=e,r):(u=1/u,r[0]=n*u,r[1]=a*u,r[2]=e*u,r):(r[0]=0,r[1]=0,r[2]=0,r)},cross:function(t,r,n){n||(n=t);var a=t[0],e=t[1];t=t[2];var u=r[0],i=r[1];return r=r[2],n[0]=e*r-t*i,n[1]=t*u-a*r,n[2]=a*i-e*u,n},length:function(t){var r=t[0],n=t[1];return t=t[2],Math.sqrt(r*r+n*n+t*t)},dot:function(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]},direction:function(t,r,n){n||(n=t);var a=t[0]-r[0],e=t[1]-r[1];return t=t[2]-r[2],(r=Math.sqrt(a*a+e*e+t*t))?(r=1/r,n[0]=a*r,n[1]=e*r,n[2]=t*r,n):(n[0]=0,n[1]=0,n[2]=0,n)},lerp:function(t,r,n,a){return a||(a=t),a[0]=t[0]+n*(r[0]-t[0]),a[1]=t[1]+n*(r[1]-t[1]),a[2]=t[2]+n*(r[2]-t[2]),a},str:function(t){return"["+t[0]+", "+t[1]+", "+t[2]+"]"}},mat3={create:function(t){var r=new glMatrixArrayType(9);return t&&(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9]),r},set:function(t,r){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},transpose:function(t,r){if(!r||t==r){var n=t[1],a=t[2],e=t[5];return t[1]=t[3],t[2]=t[6],t[3]=n,t[5]=t[7],t[6]=a,t[7]=e,t}return r[0]=t[0],r[1]=t[3],r[2]=t[6],r[3]=t[1],r[4]=t[4],r[5]=t[7],r[6]=t[2],r[7]=t[5],r[8]=t[8],r},toMat4:function(t,r){return r||(r=mat4.create()),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=0,r[4]=t[3],r[5]=t[4],r[6]=t[5],r[7]=0,r[8]=t[6],r[9]=t[7],r[10]=t[8],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},str:function(t){return"["+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+"]"}},mat4={create:function(t){var r=new glMatrixArrayType(16);return t&&(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r},set:function(t,r){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},transpose:function(t,r){if(!r||t==r){var n=t[1],a=t[2],e=t[3],u=t[6],i=t[7],o=t[11];return t[1]=t[4],t[2]=t[8],t[3]=t[12],t[4]=n,t[6]=t[9],t[7]=t[13],t[8]=a,t[9]=u,t[11]=t[14],t[12]=e,t[13]=i,t[14]=o,t}return r[0]=t[0],r[1]=t[4],r[2]=t[8],r[3]=t[12],r[4]=t[1],r[5]=t[5],r[6]=t[9],r[7]=t[13],r[8]=t[2],r[9]=t[6],r[10]=t[10],r[11]=t[14],r[12]=t[3],r[13]=t[7],r[14]=t[11],r[15]=t[15],r},determinant:function(t){var r=t[0],n=t[1],a=t[2],e=t[3],u=t[4],i=t[5],o=t[6],c=t[7],f=t[8],v=t[9],s=t[10],l=t[11],M=t[12],h=t[13],y=t[14];return M*v*o*e-f*h*o*e-M*i*s*e+u*h*s*e+f*i*y*e-u*v*y*e-M*v*a*c+f*h*a*c+M*n*s*c-r*h*s*c-f*n*y*c+r*v*y*c+M*i*a*l-u*h*a*l-M*n*o*l+r*h*o*l+u*n*y*l-r*i*y*l-f*i*a*(t=t[15])+u*v*a*t+f*n*o*t-r*v*o*t-u*n*s*t+r*i*s*t},inverse:function(t,r){r||(r=t);var n=t[0],a=t[1],e=t[2],u=t[3],i=t[4],o=t[5],c=t[6],f=t[7],v=t[8],s=t[9],l=t[10],M=t[11],h=t[12],y=t[13],m=t[14],p=t[15],d=n*o-a*i,q=n*c-e*i,A=n*f-u*i,g=a*c-e*o,b=a*f-u*o,x=e*f-u*c,T=v*y-s*h,w=v*m-l*h,F=v*p-M*h,V=s*m-l*y,W=s*p-M*y,z=l*p-M*m,G=1/(d*z-q*W+A*V+g*F-b*w+x*T);return r[0]=(o*z-c*W+f*V)*G,r[1]=(-a*z+e*W-u*V)*G,r[2]=(y*x-m*b+p*g)*G,r[3]=(-s*x+l*b-M*g)*G,r[4]=(-i*z+c*F-f*w)*G,r[5]=(n*z-e*F+u*w)*G,r[6]=(-h*x+m*A-p*q)*G,r[7]=(v*x-l*A+M*q)*G,r[8]=(i*W-o*F+f*T)*G,r[9]=(-n*W+a*F-u*T)*G,r[10]=(h*b-y*A+p*d)*G,r[11]=(-v*b+s*A-M*d)*G,r[12]=(-i*V+o*w-c*T)*G,r[13]=(n*V-a*w+e*T)*G,r[14]=(-h*g+y*q-m*d)*G,r[15]=(v*g-s*q+l*d)*G,r},toRotationMat:function(t,r){return r||(r=mat4.create()),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},toMat3:function(t,r){return r||(r=mat3.create()),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[4],r[4]=t[5],r[5]=t[6],r[6]=t[8],r[7]=t[9],r[8]=t[10],r},toInverseMat3:function(t,r){var n=t[0],a=t[1],e=t[2],u=t[4],i=t[5],o=t[6],c=t[8],f=t[9],v=t[10],s=v*i-o*f,l=-v*u+o*c,M=f*u-i*c,h=n*s+a*l+e*M;return h?(h=1/h,r||(r=mat3.create()),r[0]=s*h,r[1]=(-v*a+e*f)*h,r[2]=(o*a-e*i)*h,r[3]=l*h,r[4]=(v*n-e*c)*h,r[5]=(-o*n+e*u)*h,r[6]=M*h,r[7]=(-f*n+a*c)*h,r[8]=(i*n-a*u)*h,r):null},multiply:function(t,r,n){n||(n=t);var a=t[0],e=t[1],u=t[2],i=t[3],o=t[4],c=t[5],f=t[6],v=t[7],s=t[8],l=t[9],M=t[10],h=t[11],y=t[12],m=t[13],p=t[14];t=t[15];var d=r[0],q=r[1],A=r[2],g=r[3],b=r[4],x=r[5],T=r[6],w=r[7],F=r[8],V=r[9],W=r[10],z=r[11],G=r[12],I=r[13],L=r[14];return r=r[15],n[0]=d*a+q*o+A*s+g*y,n[1]=d*e+q*c+A*l+g*m,n[2]=d*u+q*f+A*M+g*p,n[3]=d*i+q*v+A*h+g*t,n[4]=b*a+x*o+T*s+w*y,n[5]=b*e+x*c+T*l+w*m,n[6]=b*u+x*f+T*M+w*p,n[7]=b*i+x*v+T*h+w*t,n[8]=F*a+V*o+W*s+z*y,n[9]=F*e+V*c+W*l+z*m,n[10]=F*u+V*f+W*M+z*p,n[11]=F*i+V*v+W*h+z*t,n[12]=G*a+I*o+L*s+r*y,n[13]=G*e+I*c+L*l+r*m,n[14]=G*u+I*f+L*M+r*p,n[15]=G*i+I*v+L*h+r*t,n},multiplyVec3:function(t,r,n){n||(n=r);var a=r[0],e=r[1];return r=r[2],n[0]=t[0]*a+t[4]*e+t[8]*r+t[12],n[1]=t[1]*a+t[5]*e+t[9]*r+t[13],n[2]=t[2]*a+t[6]*e+t[10]*r+t[14],n},multiplyVec4:function(t,r,n){n||(n=r);var a=r[0],e=r[1],u=r[2];return r=r[3],n[0]=t[0]*a+t[4]*e+t[8]*u+t[12]*r,n[1]=t[1]*a+t[5]*e+t[9]*u+t[13]*r,n[2]=t[2]*a+t[6]*e+t[10]*u+t[14]*r,n[3]=t[3]*a+t[7]*e+t[11]*u+t[15]*r,n},translate:function(t,r,n){var a=r[0],e=r[1];if(r=r[2],!n||t==n)return t[12]=t[0]*a+t[4]*e+t[8]*r+t[12],t[13]=t[1]*a+t[5]*e+t[9]*r+t[13],t[14]=t[2]*a+t[6]*e+t[10]*r+t[14],t[15]=t[3]*a+t[7]*e+t[11]*r+t[15],t;var u=t[0],i=t[1],o=t[2],c=t[3],f=t[4],v=t[5],s=t[6],l=t[7],M=t[8],h=t[9],y=t[10],m=t[11];return n[0]=u,n[1]=i,n[2]=o,n[3]=c,n[4]=f,n[5]=v,n[6]=s,n[7]=l,n[8]=M,n[9]=h,n[10]=y,n[11]=m,n[12]=u*a+f*e+M*r+t[12],n[13]=i*a+v*e+h*r+t[13],n[14]=o*a+s*e+y*r+t[14],n[15]=c*a+l*e+m*r+t[15],n},scale:function(t,r,n){var a=r[0],e=r[1];return r=r[2],n&&t!=n?(n[0]=t[0]*a,n[1]=t[1]*a,n[2]=t[2]*a,n[3]=t[3]*a,n[4]=t[4]*e,n[5]=t[5]*e,n[6]=t[6]*e,n[7]=t[7]*e,n[8]=t[8]*r,n[9]=t[9]*r,n[10]=t[10]*r,n[11]=t[11]*r,n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n):(t[0]*=a,t[1]*=a,t[2]*=a,t[3]*=a,t[4]*=e,t[5]*=e,t[6]*=e,t[7]*=e,t[8]*=r,t[9]*=r,t[10]*=r,t[11]*=r,t)},rotate:function(t,r,n,a){var e=n[0],u=n[1];n=n[2];var i=Math.sqrt(e*e+u*u+n*n);if(!i)return null;1!=i&&(e*=i=1/i,u*=i,n*=i);var o=Math.sin(r),c=Math.cos(r),f=1-c;r=t[0],i=t[1];var v=t[2],s=t[3],l=t[4],M=t[5],h=t[6],y=t[7],m=t[8],p=t[9],d=t[10],q=t[11],A=e*e*f+c,g=u*e*f+n*o,b=n*e*f-u*o,x=e*u*f-n*o,T=u*u*f+c,w=n*u*f+e*o,F=e*n*f+u*o;return e=u*n*f-e*o,u=n*n*f+c,a?t!=a&&(a[12]=t[12],a[13]=t[13],a[14]=t[14],a[15]=t[15]):a=t,a[0]=r*A+l*g+m*b,a[1]=i*A+M*g+p*b,a[2]=v*A+h*g+d*b,a[3]=s*A+y*g+q*b,a[4]=r*x+l*T+m*w,a[5]=i*x+M*T+p*w,a[6]=v*x+h*T+d*w,a[7]=s*x+y*T+q*w,a[8]=r*F+l*e+m*u,a[9]=i*F+M*e+p*u,a[10]=v*F+h*e+d*u,a[11]=s*F+y*e+q*u,a},rotateX:function(t,r,n){var a=Math.sin(r);r=Math.cos(r);var e=t[4],u=t[5],i=t[6],o=t[7],c=t[8],f=t[9],v=t[10],s=t[11];return n?t!=n&&(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]):n=t,n[4]=e*r+c*a,n[5]=u*r+f*a,n[6]=i*r+v*a,n[7]=o*r+s*a,n[8]=e*-a+c*r,n[9]=u*-a+f*r,n[10]=i*-a+v*r,n[11]=o*-a+s*r,n},rotateY:function(t,r,n){var a=Math.sin(r);r=Math.cos(r);var e=t[0],u=t[1],i=t[2],o=t[3],c=t[8],f=t[9],v=t[10],s=t[11];return n?t!=n&&(n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]):n=t,n[0]=e*r+c*-a,n[1]=u*r+f*-a,n[2]=i*r+v*-a,n[3]=o*r+s*-a,n[8]=e*a+c*r,n[9]=u*a+f*r,n[10]=i*a+v*r,n[11]=o*a+s*r,n},rotateZ:function(t,r,n){var a=Math.sin(r);r=Math.cos(r);var e=t[0],u=t[1],i=t[2],o=t[3],c=t[4],f=t[5],v=t[6],s=t[7];return n?t!=n&&(n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]):n=t,n[0]=e*r+c*a,n[1]=u*r+f*a,n[2]=i*r+v*a,n[3]=o*r+s*a,n[4]=e*-a+c*r,n[5]=u*-a+f*r,n[6]=i*-a+v*r,n[7]=o*-a+s*r,n},frustum:function(t,r,n,a,e,u,i){i||(i=mat4.create());var o=r-t,c=a-n,f=u-e;return i[0]=2*e/o,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2*e/c,i[6]=0,i[7]=0,i[8]=(r+t)/o,i[9]=(a+n)/c,i[10]=-(u+e)/f,i[11]=-1,i[12]=0,i[13]=0,i[14]=-u*e*2/f,i[15]=0,i},perspective:function(t,r,n,a,e){return r*=t=n*Math.tan(t*Math.PI/360),mat4.frustum(-r,r,-t,t,n,a,e)},ortho:function(t,r,n,a,e,u,i){i||(i=mat4.create());var o=r-t,c=a-n,f=u-e;return i[0]=2/o,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2/c,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=-2/f,i[11]=0,i[12]=-(t+r)/o,i[13]=-(a+n)/c,i[14]=-(u+e)/f,i[15]=1,i},lookAt:function(t,r,n,a){a||(a=mat4.create());var e=t[0],u=t[1];t=t[2];var i=n[0],o=n[1],c=n[2];n=r[1];var f,v,s,l,M=r[2];return e==r[0]&&u==n&&t==M?mat4.identity(a):(n=e-r[0],M=u-r[1],r=t-r[2],f=o*(r*=l=1/Math.sqrt(n*n+M*M+r*r))-c*(M*=l),c=c*(n*=l)-i*r,i=i*M-o*n,(l=Math.sqrt(f*f+c*c+i*i))?(f*=l=1/l,c*=l,i*=l):i=c=f=0,o=M*i-r*c,v=r*f-n*i,s=n*c-M*f,(l=Math.sqrt(o*o+v*v+s*s))?(o*=l=1/l,v*=l,s*=l):s=v=o=0,a[0]=f,a[1]=o,a[2]=n,a[3]=0,a[4]=c,a[5]=v,a[6]=M,a[7]=0,a[8]=i,a[9]=s,a[10]=r,a[11]=0,a[12]=-(f*e+c*u+i*t),a[13]=-(o*e+v*u+s*t),a[14]=-(n*e+M*u+r*t),a[15]=1,a)},str:function(t){return"["+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+"]"}},quat4={create:function(t){var r=new glMatrixArrayType(4);return t&&(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3]),r},set:function(t,r){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r},calculateW:function(t,r){var n=t[0],a=t[1],e=t[2];return r&&t!=r?(r[0]=n,r[1]=a,r[2]=e,r[3]=-Math.sqrt(Math.abs(1-n*n-a*a-e*e)),r):(t[3]=-Math.sqrt(Math.abs(1-n*n-a*a-e*e)),t)},inverse:function(t,r){return r&&t!=r?(r[0]=-t[0],r[1]=-t[1],r[2]=-t[2],r[3]=t[3],r):(t[0]*=1,t[1]*=1,t[2]*=1,t)},length:function(t){var r=t[0],n=t[1],a=t[2];return t=t[3],Math.sqrt(r*r+n*n+a*a+t*t)},normalize:function(t,r){r||(r=t);var n=t[0],a=t[1],e=t[2],u=t[3],i=Math.sqrt(n*n+a*a+e*e+u*u);return 0==i?(r[0]=0,r[1]=0,r[2]=0,r[3]=0,r):(i=1/i,r[0]=n*i,r[1]=a*i,r[2]=e*i,r[3]=u*i,r)},multiply:function(t,r,n){n||(n=t);var a=t[0],e=t[1],u=t[2];t=t[3];var i=r[0],o=r[1],c=r[2];return r=r[3],n[0]=a*r+t*i+e*c-u*o,n[1]=e*r+t*o+u*i-a*c,n[2]=u*r+t*c+a*o-e*i,n[3]=t*r-a*i-e*o-u*c,n},multiplyVec3:function(t,r,n){n||(n=r);var a=r[0],e=r[1],u=r[2];r=t[0];var i=t[1],o=t[2],c=(t=t[3])*a+i*u-o*e,f=t*e+o*a-r*u,v=t*u+r*e-i*a;return a=-r*a-i*e-o*u,n[0]=c*t+a*-r+f*-o-v*-i,n[1]=f*t+a*-i+v*-r-c*-o,n[2]=v*t+a*-o+c*-i-f*-r,n},toMat3:function(t,r){r||(r=mat3.create());var n=t[0],a=t[1],e=t[2],u=t[3],i=n+n,o=a+a,c=e+e,f=n*i,v=n*o;n*=c;var s=a*o;return a*=c,e*=c,i*=u,o*=u,u*=c,r[0]=1-(s+e),r[1]=v-u,r[2]=n+o,r[3]=v+u,r[4]=1-(f+e),r[5]=a-i,r[6]=n-o,r[7]=a+i,r[8]=1-(f+s),r},toMat4:function(t,r){r||(r=mat4.create());var n=t[0],a=t[1],e=t[2],u=t[3],i=n+n,o=a+a,c=e+e,f=n*i,v=n*o;n*=c;var s=a*o;return a*=c,e*=c,i*=u,o*=u,u*=c,r[0]=1-(s+e),r[1]=v-u,r[2]=n+o,r[3]=0,r[4]=v+u,r[5]=1-(f+e),r[6]=a-i,r[7]=0,r[8]=n-o,r[9]=a+i,r[10]=1-(f+s),r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},slerp:function(t,r,n,a){a||(a=t);var e=n;return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]+t[3]*r[3]<0&&(e=-1*n),a[0]=1-n*t[0]+e*r[0],a[1]=1-n*t[1]+e*r[1],a[2]=1-n*t[2]+e*r[2],a[3]=1-n*t[3]+e*r[3],a},str:function(t){return"["+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+"]"}};